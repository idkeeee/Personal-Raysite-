.todo-wrap{
  --panel:#1b1a1d; --ink:#e6e7c0; --sub:#9fe96a; --line:#2f2d33;
  --accent:#ffd66b; --danger:#ff6b6b;
  display:grid; gap:18px; grid-template-columns: 1fr; max-width:1100px;
  margin:20px auto; padding:0 16px 24px;
}

.todo-card{ background:var(--panel); color:var(--ink); border-radius:16px;
  box-shadow:0 10px 40px rgba(0,0,0,.35); overflow:hidden; }
.todo-card header{ display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; border-bottom:1px solid var(--line); }
.todo-card h2{ margin:0; font-size:20px; }

.add-btn{
  border:1px solid #555; background:transparent; color:var(--ink);
  padding:8px 12px; border-radius:10px; cursor:pointer;
}
.add-btn:hover{ background:#27252b; }

.table-wrap{ overflow:auto; }
.todo-table{ width:100%; border-collapse:collapse; }
.todo-table thead th{ position:sticky; top:0; background:#212025; }
.todo-table th, .todo-table td{
  padding:10px 12px; border-bottom:1px solid var(--line); vertical-align:middle;
}
.todo-table .thin{ width:56px; text-align:center; }

.task-input{
  width:100%; padding:8px 10px; background:#232126; border:1px solid #3b3940;
  border-radius:10px; color:var(--sub); font-weight:800; outline:none;
}

.drag-handle{ cursor:grab; user-select:none; opacity:.85; }
.drag-handle:active{ cursor:grabbing; }

.days-pill{
  display:inline-block; min-width:42px; padding:6px 8px; border-radius:999px;
  background:#2a2930; border:1px solid #3b3940; font-weight:800;
}

.btn{
  border:1px solid #555; background:transparent; color:var(--ink);
  padding:6px 10px; border-radius:10px; cursor:pointer;
}
.btn:hover{ background:#27252b; }
.btn.danger{ border-color:#ff9a9a80; }
.btn.danger:hover{ background:#3a2527; }
.btn.ok{ border-color:#8fffcd80; }
.btn.ok:hover{ background:#23332b; }

.drag-ghost{
  position:fixed; pointer-events:none; opacity:.92; background:#232126;
  border:1px dashed #555; border-radius:12px; padding:8px 10px;
  box-shadow:0 10px 26px rgba(0,0,0,.45); z-index:9999;
}

/* iOS long-press niceties while dragging */
.drag-lock, .drag-lock *{
  -webkit-user-select: none !important; user-select: none !important;
  -webkit-touch-callout: none !important; touch-action: none !important;
}
.drag-lock .task-input{ pointer-events:none; }


/* Allow task inputs to expand and wrap inside table */
.task-input {
  width: 100%;    /* Ensure input stretches to available space */
  white-space: nowrap; /* Prevent input from wrapping */
  overflow: hidden; /* Hide overflowing text */
  text-overflow: ellipsis; /* Show "..." when text is too long */
  word-wrap: break-word; /* Make sure long words break correctly */
}

.todo-table td {
  width: auto;  /* Allow columns to grow depending on content */
  word-wrap: break-word;  /* Ensure long task names break within the cell */
}

/* Adjust input fields for smaller screens (flexible text display) */
@media (max-width: 768px) {
  .task-input {
    font-size: 14px;  /* Smaller text on mobile */
    min-width: 120px; /* Ensure minimum width */
  }
}

/* Let the task cell flex wider */
.todo-table td:nth-child(2) {
  width: 100%;
}

/* Make the whole row use flex-like spacing */
.todo-table tr {
  display: grid;
  grid-template-columns: 36px 1fr 60px 52px 52px; /* handle | task | days | ⚡ | ✕ */
  align-items: center;
}

/* Wider task inputs — show more text before ellipsis */
.task-input {
  width: 100%;
  min-width: 160px;
  font-size: 15px;
  padding: 8px 12px;
  background: #232126;
  border: 1px solid #3b3940;
  border-radius: 10px;
  color: var(--sub);
  font-weight: 800;
  outline: none;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

/* Make pills & buttons a bit tighter so task text gets more space */
.days-pill {
  padding: 5px 6px;
  font-size: 14px;
  min-width: 38px;
}
.btn {
  padding: 5px 8px;
}

/* On mobile, stretch the task input even more */
@media (max-width: 768px) {
  .todo-table tr {
    grid-template-columns: 32px 1fr 50px 46px 46px;
  }
  .task-input {
    font-size: 14px;
    min-width: 200px; /* show more text before cutoff */
  }
}



/* optional: badge look; color still driven by inline style */
.todo-table td.days {
  font-weight: 700;
  padding: 0 10px;
  border-radius: 8px;
}


.days-pill { transition: color .2s ease; font-weight: 700; }





/*  Game mode dwn here */

/* Always-on quest skin */
.todo-table{width:100%; border-spacing:0 10px}
.todo-table thead{opacity:.7}
.todo-table tr{
  display:block; background:#121212; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.25);
  border-left:6px solid #2b2b2b; position:relative; overflow:hidden;
}
.todo-table td, .todo-table th{ display:inline-block; vertical-align:middle; }
.todo-table td.thin{ width:auto }
.todo-table td:nth-child(2){ width:55% }   /* task */
.todo-table td:nth-child(3){ width:20% }   /* days */
.todo-table td:nth-child(4),
.todo-table td:nth-child(5){ width:8% }    /* ⚡ ✕ */

.task-input{
  background:#0f0f0f; border:1px solid #2a2a2a; border-radius:10px; padding:10px 12px; width:100%;
  color:#e6fbe2; font-weight:600; letter-spacing:.2px;
}

/* rarity borders */
.q-common   { border-left-color:#22c55e !important; }   /* green */
.q-uncommon { border-left-color:#3b82f6 !important; }   /* blue */
.q-rare     { border-left-color:#a78bfa !important; }   /* purple */
.q-epic     { border-left-color:#f97316 !important; }   /* orange */

/* faint emblem */
.todo-table tr::before{
  content:""; position:absolute; left:10px; top:-20px; width:100px; height:100px; opacity:.08; filter:grayscale(1);
  background-size:60px 60px; background-repeat:no-repeat; background-position:10px 28px;
}
.q-common::before   { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><circle cx="30" cy="30" r="18" fill="%2322c55e"/></svg>'); }
.q-uncommon::before { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><rect x="12" y="12" width="36" height="36" fill="%233b82f6"/></svg>'); }
.q-rare::before     { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><polygon points="30,10 50,30 30,50 10,30" fill="%23a78bfa"/></svg>'); }
.q-epic::before     { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><path d="M30 8 L37 25 L55 25 L40 36 L46 53 L30 42 L14 53 L20 36 L5 25 L23 25 Z" fill="%23f97316"/></svg>'); }

/* days + XP badge + transitions */
.days-pill{ font-weight:800; transition: color .2s ease; }
.xp-badge{
  margin-left:10px; padding:3px 8px; border-radius:999px; font-size:12px; font-weight:700;
  background:#1a1a1a; border:1px solid #2a2a2a; color:#ffd166;
}

/* +XP float */
.xp-float{
  position:fixed; pointer-events:none; color:#ffd166; font-weight:900; text-shadow:0 2px 10px rgba(0,0,0,.4);
  animation:xpRise .9s ease-out forwards;
}
@keyframes xpRise{ from{ transform:translateY(0); opacity:1 } to{ transform:translateY(-22px); opacity:0 } }

/* drag ghost lock */
.drag-ghost{
  position:fixed; left:0; top:0; right:0; height:40px;
  padding:8px 12px; border-radius:12px; background:#0f0f0f; border:1px solid #2a2a2a; color:#fff;
  box-shadow:0 10px 20px rgba(0,0,0,.35); pointer-events:none; z-index:9999;
}


/* ===== Task details dropdown ===== */

.task-row .task-main{
  display:flex;
  align-items:center;
  gap:8px;
}

.task-row .task-main .task-input{
  flex:1;
  min-width:0; /* prevents overflow in flex */
}

.expand-btn{
  width:34px;
  min-width:34px;
  padding:6px 0;
  text-align:center;
  font-weight:900;
}

/* hidden by default */
.task-details{
  max-height:0;
  opacity:0;
  overflow:hidden;
  margin-top:0;
  transition: max-height .18s ease, opacity .18s ease, margin-top .18s ease;
}

/* visible when row expanded */
.task-row.task-open .task-details{
  max-height:220px;   /* enough room for textarea */
  opacity:1;
  margin-top:8px;
}

.task-details textarea{
  width:100%;
  min-height:90px;
  resize:vertical;
  padding:10px 12px;
  border-radius:10px;
  background:#0f0f0f;
  border:1px solid #2a2a2a;
  color:var(--ink);
  outline:none;
  font-family:inherit;
}


/* Daily done toggle */
.btn.daily-toggle{
  width:38px;
  min-width:38px;
  padding:6px 0;
  font-weight:900;
  border-color:#ff9a9a80;
  background:#3a2527;
}

.btn.daily-toggle:hover{
  background:#4a2b2e;
}

.btn.daily-toggle.done{
  border-color:#8fffcd80;
  background:#23332b;
}

.btn.daily-toggle.done:hover{
  background:#2a3f33;
}
